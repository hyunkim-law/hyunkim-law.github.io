---
layout: post
title: "아이폰에서 단축어를 이용하여 소셜미디어 포스팅"
categories: [" how"] # suggestion: gtd, how, lawyering, news, stuff, books, english
excerpt: "아이폰에서 단축어를 이용하여 페이스북과 트위터에 동시 포스팅하기"
sharing:
  facebook: "아이폰에서 단축어를 이용하여 페이스북과 트위터에 포스팅하기"
  twitter: "아이폰에서 단축어를 이용하여 페이스북과 트위터에 포스팅해 보자"
color-scheme: cyan # available: red, orange, green, cyan, blue, magenta, brown 
date: 2020-03-10 02:22:12 +0900
tags: 
math: # true possibly
# To include book: {% include book.html id='calstory' %}
# To include image: {% include image.html url='FN' description='description' alt='alt' %}
---

코로나바이러스 때문에 시간이 많은 것은 좋은데 (집에서 나가질 않으니), 이러다가 굶어 죽는 것은 아닌지 모르겠습니다. 수많은 자영업자들이 그렇듯이 변호사도 소셜네트워크 필요하다는 것은 알지만 시간이 나질 않는게, 가장 큰 문제라고 합니다. 특히나 코로나바이러스 때문에 사람들이 식사는 커녕 만나는 것도, 악수하는 것도 싫어하는 결벽증/자폐 사회가 되어가고 있는데 말이죠. 특히나 소셜네트워크가 중요한데 말이죠.

저는 반복하는 것을 좀 극단적으로 싫어합니다. **DRY**라고 하죠, **Do Not Repeat Yourself!** 그러니까, 절대 반복하지 말라! 저는 계약서를 쓸 때, Section 1, 2, 3... 하는 식으로 "Section"이라는 말을 반복하는 것도 싫어서 방법을 찾아 냅니다.  그래서 블로그를 다시 만들고 처음 쓴 글이 [VS Code의 snippet 기능](/blog/2020/03/vscode-snippet.html)에 대한 것과 [IFTTT로 커맨드라인에서 직접 포스팅하기](/blog/2020/03/facebook-post-with-ifttt.html)에 대한 것이었죠. 뒤의 글은 `webhook`을 이용하는 것에 대한 글이었는데요, 이걸 만들어 두었다면, 이제는 아이폰의 [단축어](https://support.apple.com/ko-kr/guide/shortcuts/welcome/ios)를 이용해서 포스팅을 설정하는 것은 아주 쉽죠.

{% include image.html url='shortcuts.png' description='아이폰에서 단축어로 페이스북 포스팅' alt='아이폰의 단축키를 사용하여 페이스북 포스팅' %}

특히, 여기에 이어서 같은 글로 트위터에까지 포스팅하도록 해 놓았다면, 그 다음은 아주 쉽습니다. 위의 `IFTTT`에 대한 글에서 보는 것처럼 했다면, 아래와 같은 `webhook` 주소를 가지고 있겠지요.

~~~html
https://maker.ifttt.com/trigger/test/with/key/{key}
~~~

일단 이것이 있는지 확인하고 나서, 아이폰에서 `단축어`라는 앱을 찾아서 클릭합니다. iOS12 이후 것은 다 있을겁니다. 그리고, 오른쪽 위의 더하기를 눌러서 새로 만듭니다.  그리고, 맨 처음에는 순서가 중요한데요 (왜냐하면, 제가 원하는 것은 특정 웹페이지에 갔을 때, 거기에서 인용하고 싶은 부분을 선택해서 복사하면, 아이폰에서 자동으로 주소를 따로 복사해 주는 것이었기 때문에요), 먼저 더하기(+)를 누르고 ... 이것 엄청 많이 눌러야 합니다 ... '웹'을 선택한 다음 '기사 세부 정보 가져오기'를 눌러서 선택합니다. 그러면 "`기사`에서 "`...`가져오기"같은 항목이 생길텐데, 앞의 것은 놔 두고 (다르게 어떻게 하는지를 찾을 수가 없더군요, 게다가 이걸 나중에 하면 제대로 먹히지 않고, 맨 앞에 있어야 먹히더라구요), 뒤쪽에 `URL`이라고 씁니다.

그리고 또 `+`를 누르 다음, "스크립트 하기"를 누르고, "변수설정"을 선택합니다. 그리고, 생기는 상자에서 예를 들면 `Link` 변수를 `URL`(으)로 설정으로 합니다.

그 다음에는 똑같은 "변수설정"을 다시 한 번 더 합니다. 앞의 것은 아이폰이 알아서 URL을 가지고 오는 것이고, 이제는 내가 선택해서 복사한 부분을 가져오기 위한 것입니다. 따라서, 임시변수를 만들어서 클립보드 내용을 지정합니다. 저의 경우에는 `Msgtmp` 변수를 `클립보드`(으)로 설정했죠.

그 다음에는 `+`를 누른 다음, `문서`를 선택하고, 나타나는 공란에 키보드에 나오는 변수들 가운데 몇 개를 집어 넣습니다. 저의 경우에는 대략 이런데요:

`Msgtmp 매번 묻기 -- Link`

여기에서 `Msgtmp`라고 지정한 곳에는 앞에서 선택해서 클립보드에 복사한 부분이, 그리고 `Link` 부분에는 웹페이지 주소가 들어갑니다. 그리고 `매번 묻기`를 꼭 선택해야 나중에 직접 내용을 입력할 수 있는 창이 뜹니다. 그리고 `매번 묻기` 자리, 그러니까 메시지와 링크 사이에 커서가 놓이게 되죠. 맨 뒤로 보내고 싶으면 맨 뒤에 `매번 묻기`를 놓으면 됩니다.


그 다음에는 다시 한번 "스크립트 하기"에서 "변수설정"을 선택한 다음 `Msg` 변수를 `텍스트`(으)로 설정합니다.

그 다음에는 `문서-텍스트`를 한 번 더 선택한 다음에, 위 `IFTTT` 사이트의 키를 저장합니다. 굳이 이렇게 안하고, 나중에 URL을 그냥 다 한번에 넣어도 큰 상관 없습니다. 일단 그 텍스트에 들어간 내용을 `Key`로 설정했다면, 

다시 `웹`으로 가서 `URL`을 선택합니다. 그 자리에 집어넣는거죠. 예를 들어, 위 주소와 같다면,

~~~html
https://maker.ifttt.com/trigger/test/with/key/
~~~

여기까지 입력한 다음 맨 마지막 위치에 커서를 놓고 키보드에서 조금전에 만든 `Key`라는 변수를 선택합니다. 

마지막으로(!) `웹`에서 `URL 콘텐츠 가져오기`를 선택합니다. 그 다음 `메소드`에는 `POST`를 선택하고, 본문요청은 `JSON`으로 한 다음 `새로운 필드 추가`를 하여, `value1`과 `value2`를 선택한 다음 (물론 IFTTT 서버에서도 두 개를 다 받도록 설정해 두었다고 하면), `value1`에는 앞에서 지정한 `Msg`를, `value2`에는 `Link`를 선택합니다.

쉽죠. 그렇데, 이게 앞의 `URL` 가져오기 단계에서 상당히 시간이 걸리더라구요. 더 쉬운 방법이 있긴 한데, 돈이 좀 듭니다. 일단 [Pythonista](https://apps.apple.com/kr/app/pythonista-3/id1085978097)라는 앱을 구매합니다. 12,000원은 좀 비싸긴 하지만, 사실 아주 강력한 아이폰용 파이썬 해석기죠.  이걸 쓴다면, 더 쉬운 방법은 이겁니다.  일단 이걸 열고, 다음과 같은 프로그램을 하나 만듭니다.

~~~python
import requests
import dialogs
import appex

def send_event(value1=None, value2=None):
    url = 'https://maker.ifttt.com/trigger/text/with/key/{key}'
    payload = {''value1': value1, 'value2': value2}
    return requests.post(url, data=payload)

message = dialogs.text_dialog("포스팅할 내용 입력")
link = appex.get_url()

if __name__ = '__main__':
    x = send_event(message, link)
~~~

아주 간단하죠. 왜냐하면, 임포트하는 라이브러리에서 모든 일을 다 하기 때문이죠. 간단히 설명하자면, 10번째줄에서는 `dialogs` 모듈을 이용해서 입력창을 띄웁니다. 11번째 줄에서는 `appex` 모듈을 이용해서 페이지 URL을 가지고 옵니다. 그리고, 14번째 줄에서 이걸로 `send_event()`를 호출합니다. 그러면 이것은 앞의 `send_event`를 호출하여 입력한 내용을 가지고 `payload`를 만들어서 `url`로 보냅니다.

이렇게 만들어서, 여기에 `post.py`라는 이름을 지정했다고 한다면, 앞의 `단축어` 만들기로 다시 갑니다. 이번에는 좀 간단한데 (사실 한 줄짜리 단축어), `앱`에서 `Pythonista`에서 `스크립트 실행`을 선택합니다. 그리고 

"`클립보드`를(을) 사용하여 `post.py` 실행"

이라고 입력하면 됩니다. 

두 경우 모두 끝내고 나서, 오른쪽 위의 줄임말 "..."을 선택한 다음, 만약 홈버튼에 추가하고 싶다면, 그걸 선택, 그리고 

"위젯에서 보기" -> 이건 맨 첫페이지에서 왼쪽으로 한 번 더 스와이프하면 나오는 창에 넣는 것이고,

"공유 시트에서 보기" -> 이건 웹페이지를 보다가 사파리의 경우 맨 아래에 네모난 상자에 위로 올라가는 화살표를 누르면 나오는 옵션들에 지금 만든 스크립트가 나오는 겁니다. 그러면 웹페이지를 보다가 흥미로운 부분이 있으면 클립보드로 복사한 다음 그걸 선택해서 간단히 편집한 다음 `확인`을 누르면 포스팅이 되는거죠.